{% extends 'auth/base.html.twig' %}

{% set hide_navigation = true %}
{% set hide_footer = true %}

{% block title %}Forgot Password - PrettiOps{% endblock %}
{% block description %}Reset your PrettiOps account password{% endblock %}

{% block body_controllers %}{{ parent() }} form{% endblock %}

{% block auth_content %}
<div class="auth-container">
    <div class="auth-header">
        <h1 class="auth-title">Forgot your password?</h1>
        <p class="auth-subtitle">Enter your email address and we'll send you a link to reset your password</p>
    </div>

    {# Forgot Password Form #}
    <form 
        method="post" 
        class="space-y-6"
        data-controller="form"
        data-action="submit->form#submit"
        data-form-validate-on-input-value="true"
        data-form-show-success-value="true"
        novalidate
    >
        {# CSRF Token #}
        <input type="hidden" name="_token" value="{{ csrf_token('forgot_password') }}">
        
        {# Error/Success Messages #}
        <div class="alert alert-error hidden" data-form-target="error" role="alert" aria-live="polite">
        </div>
        
        <div class="alert alert-success hidden" data-form-target="success" role="alert" aria-live="polite">
        </div>

        {# Email Field #}
        <div class="form-group">
            <label for="email" class="form-label">
                Email address
                <span class="text-red-500" aria-hidden="true">*</span>
            </label>
            <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="you@example.com"
                required
                autocomplete="email"
                aria-describedby="email-help"
                data-form-target="field"
            >
            <div id="email-help" class="form-help">Enter the email address associated with your account.</div>
        </div>

        {# Submit Button #}
        <button 
            type="submit" 
            class="btn btn-primary w-full"
            data-form-target="submit"
        >
            <span data-form-target="loading" class="loading-spinner hidden"></span>
            <span>Send Reset Link</span>
        </button>
    </form>

    {# Footer Links #}
    <div class="auth-footer">
        <p class="auth-footer-text">
            Remember your password? 
            <a href="{{ path('app_login') }}" class="auth-footer-link">
                Sign in
            </a>
        </p>
        <p class="auth-footer-text">
            Don't have an account? 
            <a href="{{ path('app_register') }}" class="auth-footer-link">
                Sign up for free
            </a>
        </p>
    </div>
</div>
{% endblock %}

{# Additional JavaScript for this page #}
{% block page_scripts %}
    {{ encore_entry_script_tags('auth') }}
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-focus on email field
            const emailField = document.getElementById('email');
            if (emailField) {
                emailField.focus();
            }
        });
    </script>
{% endblock %}