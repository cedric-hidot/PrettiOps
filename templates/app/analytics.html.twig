{% extends 'base.html.twig' %}

{% block title %}Analytics - PrettiOps{% endblock %}
{% block description %}View your code snippet analytics and engagement metrics{% endblock %}

{% block body_class %}analytics-page liquid-glass-page{% endblock %}

{% block content %}
<main class="max-w-7xl mx-auto px-6 py-8">
    <!-- Analytics Header -->
    <div class="page-header-glass">
        <h1 class="page-title">Analytics</h1>
        <p class="page-subtitle">Track your code snippet performance and engagement</p>
    </div>

    <!-- Stats Overview -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="stats-glass-card fade-in-glass">
            <div class="stats-number">{{ stats.totalSnippets ?? 0 }}</div>
            <div class="stats-label">Total Snippets</div>
            <div class="stats-change">+{{ stats.snippetsThisMonth ?? 0 }} this month</div>
        </div>
        
        <div class="stats-glass-card fade-in-glass" style="animation-delay: 0.1s">
            <div class="stats-number">{{ stats.totalViews ?? 0 }}</div>
            <div class="stats-label">Total Views</div>
            <div class="stats-change">+{{ stats.viewsThisMonth ?? 0 }} this month</div>
        </div>
        
        <div class="stats-glass-card fade-in-glass" style="animation-delay: 0.2s">
            <div class="stats-number">{{ stats.totalShares ?? 0 }}</div>
            <div class="stats-label">Total Shares</div>
            <div class="stats-change">+{{ stats.sharesThisMonth ?? 0 }} this month</div>
        </div>
        
        <div class="stats-glass-card fade-in-glass" style="animation-delay: 0.3s">
            <div class="stats-number">{{ (stats.totalViews and stats.totalShares) ? ((stats.totalShares / stats.totalViews * 100)|round(1)) : 0 }}%</div>
            <div class="stats-label">Engagement Rate</div>
            <div class="stats-change">Views to shares ratio</div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <div class="glass-panel slide-up-glass">
            <h2 class="text-lg font-semibold text-white mb-4">Views Over Time</h2>
            <div class="h-64 flex items-center justify-center text-gray-400 bg-black/20 rounded-lg border border-white/10">
                <div class="text-center">
                    <svg class="w-12 h-12 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    <p class="text-gray-300">Chart coming soon</p>
                </div>
            </div>
        </div>
        
        <div class="glass-panel slide-up-glass" style="animation-delay: 0.1s">
            <h2 class="text-lg font-semibold text-white mb-4">Popular Languages</h2>
            <div class="h-64 flex items-center justify-center text-gray-400 bg-black/20 rounded-lg border border-white/10">
                <div class="text-center">
                    <svg class="w-12 h-12 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"/>
                    </svg>
                    <p class="text-gray-300">Chart coming soon</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="glass-panel slide-up-glass" style="animation-delay: 0.2s">
        <div class="border-b border-white/10 pb-4 mb-6">
            <h2 class="text-lg font-semibold text-white">Recent Activity</h2>
        </div>
        <div>
            {% if recentActivity|length > 0 %}
                <div class="space-y-4">
                    {% for activity in recentActivity %}
                        <div class="flex items-center justify-between py-3 border-b border-white/10 last:border-0">
                            <div>
                                <p class="font-medium text-white">{{ activity.title }}</p>
                                <p class="text-sm text-gray-300">{{ activity.description }}</p>
                            </div>
                            <div class="text-sm text-gray-400">{{ activity.time }}</div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="text-center py-16">
                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <p class="text-gray-300">No recent activity to display</p>
                    <p class="text-gray-400 text-sm mt-2">Start creating snippets to see activity here</p>
                </div>
            {% endif %}
        </div>
    </div>
    </div>
</main>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        // Analytics page specific JavaScript can go here
        console.log('Analytics page loaded');
    </script>
{% endblock %}